## DB 設計全体の流れ

- 論理設計
- 物理設計
- 論理設計 => 物理設計

### 論理設計

- 開発者から見たデータベース
- エンティティの抽出
- エンティティの定義
- 正規化
- ER 図

### 物理設計

- DBMS から見たデータベース
- テーブル定義
  - 実際にテーブルを作る
- インデックス定義
  - パフォーマンスの最適化を目的にインデックスを定義
- ハードウェアのサイジング
  - キャパシティとパフォーマンスの２つの点で決める
    - キャパシティ
      - サービス終了時にデータ量がどの程度になるか見積もりストレージの選定
      - 実際は難しいため下記を行う
        - 安全率を大き k とり余裕を待たせたストレージを選定
        - 後で容量が不足しても、簡単に容量追加できる構成にしておく
    - パフォーマンス
      - DB のパフォーマンスは、サーバーの CPU やメモリを考えがちだが実際のところ DB の性能問題は 8 割がディスク I/O によって起きる
      - そのため、ストレージのサイジングもパフォーマンスにとって重要
- ストレージの冗長性構成決定
  - RAID によってシステムの信用性と性能を上げる。
- ファイルの物理的配置決定

## インデックスとは

## ディスク I/O とは

## RAID

## 正規化

- テーブルを無損失分解となるようにテーブルを分解する

- 手順
  - 第一正規系
    - テーブルで表現ができる形になっていること
    - 一カラムに値は一つだけ
    - 配列をカラムに入れることはできない
  - 第二正規系
    - 全ての候補キーにおいて部分関数従属性が存在しない状態
  - 第三正規系
    - 推移関数従属性が存在しない状態

### 無損失分解

- 分割後のテーブルを結合することで、分割前のもとの状態に戻せることを言います。

## 候補キー

- テーブル上で任意のレコードを特定するためのカラムの集合
- 主キーやユニークキー

## 非キー属性

- 候補キーに含まれないもの
- 主キーやユニークキーに含まれないカラムのことをさします。

## 関数従属性

- レコードにおいて、あるカラム A が決まれば別カラム B も特定できる関係のことを指す

## 部分関数従属性

- 非キー属性が一部の候補キーに関数従属していること

## 推移関数従属性

- 非キー属性 A が特定の非キー属性 B に関数従属しているようなこと
- 非キー属性 A は正規化上は候補キー X に関数従属している状態のため、X=>A=>B のような関係になる
- このように間接的に従属すること
